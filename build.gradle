plugins{
    id 'org.springframework.boot' version '2.4.4'
    id 'io.spring.dependency-management' version '1.0.11.RELEASE'
    id 'com.github.ben-manes.versions' version '0.38.0'
    id 'java'
}

repositories{
    mavenCentral()
    maven { url 'https://oss.sonatype.org/content/repositories/snapshots' }
    maven { url 'https://www.jitpack.io' }
}

ext{
    junit_version = '5.7.1'
    joda_version = 'v2.10.10'
    caffeine_version = '3.0.1'
    evalex_version = '2.5'

    jaxb_version = '2.3.1'
    hibernate_version = '5.4.28.Final'

    junit_version = '5.7.1'
}

tasks.withType(JavaCompile){
    options.encoding = "UTF-8"
    options.compilerArgs += ["--enable-preview"]
}

dependencies{
    implementation "com.discord4j.discord4j:discord4j-core:master-SNAPSHOT"
    implementation "com.github.JodaOrg:joda-time:$joda_version"
    implementation "com.github.ben-manes.caffeine:caffeine:$caffeine_version"
    implementation "com.udojava:EvalEx:$evalex_version"

    // data dependencies
    implementation "javax.xml.bind:jaxb-api:$jaxb_version"
    implementation "org.hibernate:hibernate-core:$hibernate_version"
    runtimeOnly "org.postgresql:postgresql"

    // spring dependencies
    implementation "org.springframework.boot:spring-boot-starter-data-jpa"
    implementation "org.springframework.boot:spring-boot-starter-security"
    annotationProcessor "org.springframework.boot:spring-boot-configuration-processor"

    testImplementation "org.junit.jupiter:junit-jupiter-engine:$junit_version"
}

test{
    useJUnitPlatform()
    jvmArgs += ["--enable-preview"]
}
